<html>

<head>
<title> My Compiler Explorer Snipets </title>
</head>

<body>
<center>
  
<h1> My Compiler Explorer Snipets </h1>
    
    
  <p>
  If you are using Chrome, open `chrome://flags/#enable-lazy-image-loading` and enable lazy loading to lazy load `iframe`s.
  </p>
  
  
  <h2> std::optional </h2>
  <iframe width="800px" height="200px" src="https://godbolt.org/e#z:OYLghAFBqd5QCxAYwPYBMCmBRdBLAF1QCcAaPECAM1QDsCBlZAQwBtMQBGAFlICsupVs1qhkAUgBMAISnTSAZ0ztkBPHUqZa6AMKpWAVwC2tEJIAMpLegAyeWpgByxgEaZiXAOykADqgWE6rR6hiZmln4BanR2Ds5Gbh6c3koq0bQMBMzEBCHGphaKypiqQZnZBLFOru5eilk5eWGFCg2V9tUJtckAlIqoBsTIHADkUgDM9siGWADU4uN6PulsC9ji5gCCE1MzmPOLrfj0AHQIaxvbW5cEmEY%2BwrcLOtPMCgqzACoXW63EBqpZgAFZh4YjzTyyLazGFfWYANzYBkwCyhm1hsxcqH0CLYeHQqMu4k8ABFCddfgR/oD0cS0ZcMa1mGpkAjUPjZmgfABPAD6EE2ACpSLN0WhaK1BT1yejYUyWWyOVhWvyhdLxmjGVkFfD2ehOXQFKrhaKDRKCFKZQzYZsBWbWvNJAA2Yg9CGajGw8VGiAEBB4BQiqQu9UemHEsnQm2Op2oHzuZkkBYku3eggx13u62eg08/l%2BgNB52umU5mHETAEQa0WaCgsKUuwiPZ2YAP1tbrpLYxyoI%2Bf9ClDLeb11JVsp6BAIDjK1Yz3sBDWswrVeItF5iMMmAgC9mzE7kJbK%2BrsyOU5nQVWiwXawg%2B6tY4pm11HOPa43SO3ILB8/oS%2BDFYKAYrAECKu6bsiB5hsumBASBJwQfsya4lujblrBwEEAheL6shVLIg%2BkZXJsZ7Tssl5zosL7oIKS5vuuiEQNRtb7lmUboauNakRedBXjo1G0eM2B3kOo5EZczH0R%2BW4QN%2BxDPAJ/7FhhIEisxgqIVBR4qVhiEHCSKEERq2lwbpOH6bM%2BEosZYlEk%2B3HkbxlE6NsQkwZx0nInarFdux7kng5s7PK5wn3jZ2yPsRkmVtWnlfqC8mLCFGY6SK6KaWxsowlODgAO4QABOnYVubq2ppaEwaZxUcnh/zWfSkV2cREl6nu7x4MAtAQIFFEKXqgnYDGzAij1Tl9fiA3hs6LhaX5zAWS4hFNcxbwBJ1skJeNNFKU6w3AptVH9TtM2ZRi83IYt4UjlFrWrR1XWjbQfGKW5wZ7Y9z1HW5J2%2BVle4LUtWwre161yVtk1vSKYOHRNS4/Yec0A1djVA7dIMPQQk5kUFSU7e9mPno5T3Oclwbw9B53jAZl0NeJqMcndoMHS5eNQ8zyVpjG5MtngVAQC41W4c6wZ7oLs1/WdxXIgtUv1cOpKzMoSizLz/Ni6dZY5Zg%2BVvbLpVq%2BV4UYhGiusMrqvMOrv1lqLiEnO2ECiX912S5uNVU5igsVZbbu4R7VBsEogPESMfSsCAIwAKwjKQpgjOYMeoBHOhyHIp4DEMSGSOMnAxwQEcJz0fQANYgNw4wnOXkieJHnieJwAAc3CeBYkhCBH3Ax3HCekEnIwxwoICWPn8eh6QcCwEgaD3Hg7BkBQEDTz4s%2B1MAnDmG3VCz7cxCD/zBcxy49jZNyEe56Q09GFoBAAPK0Kwp%2Bj6QWBGCIwDsAfz9giUajwrBn%2BYAAB4lAMLcM%2BMcFzKE/qwPALhiAnz0FgT%2BVI8BGHAX0Gg9AmBsA4DwfgghhCiBQKnGQQhYGD1gE9K%2BIB4GiFgvCcYpA/4eHwrQYuRde5E0HiMAAtDfSQsweFHGTBIGQcgLAD2KKUDQEBrBNFMJwNu1gqjxESGYbwkRAh0HkVwNumj0gqJqB4auRQ0hlDaDoxRpif7mIqIYroxiUgWP0PkXR9Q7EdFUbUaufQFAZ2GFwMOEdo6x0/n3QBDcnQ8KdNwWYwBkCsnXicAREBcCEBII6HOIo9AzznpkzgboU5iJkHnA%2BHDS7Z2SeMcYABOcwDcancAbpwRpTonTeHDiMTupA0Hr0sN3ROEcB5D1ICPQu48YCIGnKAnwoDyCUCXivJIVh8BEGWZgxgLAP54NyvAnw6D25Ry7mEiOExOCzFyoQBAswIlRJiXEhJswkmSFKaPcpIBqknGqd8n5vzDndIGb3IZigRljNDkEkYLzQlPz7q8wufRmEBA0NwIAA%3D%3D%3D"></iframe>

  <h2> For loops in which compiler can't generate good instructions for `unsigned` </h2>
  <iframe width="1600px" height="700px" loading="lazy" src="https://godbolt.org/e?readOnly=true&hideEditorToolbars=true#z:OYLghAFBqd5QCxAYwPYBMCmBRdBLAF1QCcAaPECAM1QDsCBlZAQwBtMQBGAFlICsupVs1qhkAUgBMAISnTSAZ0ztkBPHUqZa6AMKpWAVwC2tQVvQAZPLUwA5YwCNMxEAGYArKQAOqBYXW0eoYmgj5%2BanRWNvZGTi4eisqYqgEMBMzEBEHGppyJKhG0aRkEUXaOzm6eCumZ2SF5NSVlMXFVAJSKqAbEyBwA5FKu1siGWADU4q46AG7JRMRT2OIADACCq2vWBOM0qAD62xA16CAgc6okUzrbS5OSAGzM7ZMA7LLr41/j2%2BMKRpNXAARcYrKYfNbfXYkCC/PCAkFg1zSH6AnTjWH0drMAB0fgAXpgIO1wfdZDI8C9xO9NlCof8yVMQcxxO5pHhWUDwbTvtSuZ9vsRMAQerQ/kZues%2BZtNr89vsDLQ/MAbOhjgRTud5ldprdXNh7k8qTSBV9fgymaDJZDvjRiBBFcrVajLUiUfDruNcQSiSTkYyKcaIXTvhaZJaWWyOe4ucieV9pabxkKRcQxf9rYmNlL1nLUAcffsCOrNRcFtc9QapEa3sHvuaAa7rVC7cc8ISiy7gVb/R7pl68e3faS5HJKbX43Sw7Ju5H2Zzm7zXvybV8U6LxZnlzLc/RoQcvARiPgqFQiyWzmWdTd6Hdq88J0mGwie3Wvq3D8e8KfO33EaS%2B3RCBPxPM8CGxQdCWJEdw0DR9VynRtw1nVl5xjRcE23JN1zTTc4ylLDsy2Pd5QIAB3VAfG2ZwLy1S5Fl1W99UNB9qTfH49wtbs3UnVtmAMIgu2ZHEnGAaxoN7NEB3MCSUVHOC2MnekkJnEEACoOXwhCsyhHD0wlLSs36TpWBAfp3H6UhTH6FZLNQMydHklEFG6XpMHuVxOEsggzNs9pOgAaxAbgAA4cW4FZXk8yKVm4ABOB4VhC3hTP6bhLOs2zSHs/pLIUEAVlIHybOM0g4FgJA0CMLw8HYMgKAgKqarqkBgBCyRSCoWqCGcfKIAcXzLIcawMgATzMrzSCqowtAIAB5WhWHGkrSCwIwRGAdhBtWvAhRSOZ8pWzAAA9kgEgZJuo1KstYPAHGIMa9CwCbvOIPAjEGzoaHoJg2A4Hh%2BEEYRRBQJyhDu/LYFoZgZpAY6CFYUg5hcGz3FcUqIGh2H4a0FyyGR3zODi9LOkxmGOCoIwCCRyoj0VAL/Oyw8AkOgBaObJDypIUg0CBzHqXJSHMFoKhcPIwn8OgBdCXxJdoEXYkqRpucKYo6n0HJBCUApUlqUprHKRWxcUPXpcaPWFbaThOhcno%2Bi4EyzIsqztpy46QoeVmHm4cZgGQZBxjCyQMVwQgSA8vJxj0araucCOXkc2DpG8z7OgQTBmCwFxiVIIL3E4HF3Dix4QuLuL3BWVw4s4V4hDM9LSA%2BzgVkKzK7LMvKCqK1O6/6TmXZWnKU5Kxnkb8DRuCAA"></iframe>

  <h2> For loops in which compiler can't use register to cache the size() and data() </h2>
  <iframe width="1600px" height="700px" loading="lazy" src="https://godbolt.org/e?readOnly=true&hideEditorToolbars=true#z:OYLghAFBqd5QCxAYwPYBMCmBRdBLAF1QCcAaPECAM1QDsCBlZAQwBtMQBGAFlICsupVs1qhkAUgBMAISnTSAZ0ztkBPHUqZa6AMKpWAVwC2tLgFZSW9ABk8tTADljAI0zEuABlIAHVAsLqtHqGJuY%2BfgF0tvZORq7unF5KKmp0DATMxATBxqacFsmYqoHpmQTRji5unooZWTmh%2BbVlFbHxngCUiqgGxMgcAORSAMx2yIZYANTiwzoAbkVExDPY4h4AgmvrdgSTNKgQCgToICALqiQzOjsr05IAbMykk3OoeOiTEABUCqhGmAQEHZgB0IB0OtMAOyyDaTOGTHaTBRGabDAAikw8Mxh63hkwA9PjJoDiJhMJN/kZiKgAJ6TVioZjoLZ4mjEQ54ABemAA%2Brs8KiMVjhtIEaidJNmAA6fzcsHYu6yGR4CHiaEsvHw37/QHA%2BUijWapEouQzDHMcRmaR4S1o7GGqF22Hw0kEXq0Y32jZqp2bDaI/aSQ7HU7nJZXG7DbB3R7PV7vT4/P4AoGiUHgqE4vGI5GCzFe3Farm83YKTl56WyzD6rPwwnEgDuqApmCptPpjOZzrhbI53L5YrN%2BZFg9mSM5CtNytV6u7mu1Kb1HQLRrhudN6MlluttpX8J9Dtd7s9Bu9kN9WwDqFQw2DJzOi0us0j0aksZebw%2B3wXurTYJntZwjmJqbsKgFIsWA5lhWMrFjWDqIl86C7EO0roMwGTwXO9Z0OSlLUnSDJMg6vZVgOApDmBo4SmWk4yHIKqZg6eI/qmwBYYWRrrvRm7IduNpmHap6cY6h4AseyIFge3obAMXSsCAAxmAMpCmAMHgqagik6FOoq/L0/R3MMnAqQQikaeCpAANYgNwkhSgAHJCkgePcDz3MZDlmMMDlCIp3AqWpGmkFpAwqQoIBeGZ6lyaQcCwEgaBGN4eDsGQFAQElKVpSAwAOZIpBUKlBBuBFEDOOZKnOHYmQ0opJmkEl/z0AA8rQrB1TFpBYEYIjAOwlXdXgpLFAsEVdZgAAeRQGCV9UqTsyiDaweDOMQtV6Fg82kAQxB4EYlVdDQ9BMGwHA8PwgjCKIKC6UIq0RbAtDMP8ICTQQrCkAs7jqd5sUQM9r3vVovxkN95mcAAnAFXQAy9HBUEYBBfdUu0GLQVmWag3ipLQ40ALQtZI4XKIsgSaNoDR5JY2itFUCThP4uNU4IvhM4EdNxNUnCKKTxRpHU2T6LkgiFPztClFknPtDzRxlCzsuC9L3NdPpfTnfJinKapg2hZNDn3Pj9zcJMwDIMgkwOVKkifLghAkEZPOTHoyWpW4jsQjp9EyKZh1dAgmBMtUYLWSAZiQlKnCSJCkPDJCwzDPcDk8G5FgKQMAWkAdiReEFmmKeFkU7X7fkDMTOtdaFvsxZZ33%2BBo3BAA"></iframe>

  <h2> Unique_ptr case 1 </h2>
  Using a unique_ptr in function internal, unique_ptr is zero overhead.
<iframe width="1600px" height="700px" loading="lazy" src="https://godbolt.org/e?readOnly=true&hideEditorToolbars=true#g:!((g:!((g:!((h:codeEditor,i:(fontScale:14,j:1,lang:c%2B%2B,selection:(endColumn:1,endLineNumber:12,positionColumn:1,positionLineNumber:12,selectionStartColumn:1,selectionStartLineNumber:1,startColumn:1,startLineNumber:1),source:'%23include+%3Cmemory%3E%0A%23include+%3Cutility%3E%0A%0Avoid+foo()+%7B%0A++++int+*ptr+%3D+new+int%3B%0A++++delete+ptr%3B%0A%7D%0A%0Avoid+foo2()+%7B%0A++++std::unique_ptr%3Cint%3E+ptr(new+int)%3B%0A%7D%0A'),l:'5',n:'0',o:'C%2B%2B+source+%231',t:'0')),k:47.846812901611926,l:'4',n:'0',o:'',s:0,t:'0'),(g:!((h:compiler,i:(compiler:g82,filters:(b:'0',binary:'1',commentOnly:'0',demangle:'0',directives:'0',execute:'1',intel:'0',libraryCode:'1',trim:'0'),fontScale:14,j:1,lang:c%2B%2B,libs:!((name:xtl,ver:'053'),(name:xtensor,ver:'0194'),(name:fmt,ver:trunk)),options:'-O2+--std%3Dc%2B%2B17',selection:(endColumn:8,endLineNumber:9,positionColumn:8,positionLineNumber:9,selectionStartColumn:8,selectionStartLineNumber:9,startColumn:8,startLineNumber:9),source:1),l:'5',n:'0',o:'x86-64+gcc+8.2+(Editor+%231,+Compiler+%231)+C%2B%2B',t:'0')),header:(),k:52.15318709838809,l:'4',m:100,n:'0',o:'',s:0,t:'0')),l:'2',n:'0',o:'',t:'0')),version:4"></iframe>  

  <h2> Unique_ptr case 2: return a unique_ptr is not zero overhead </h2>
  Returning raw pointer is by register. Returning unique_ptr is by stack.
  
  For cdecl, the caller should clean up the returning value.
  
  If you use the unique_ptr, then the compiler could assume your pointer is not null, then eliminate the branch for null pointer.
  
<iframe width="1600px" height="700px" loading="lazy" src="https://godbolt.org/e?readOnly=true&hideEditorToolbars=true#g:!((g:!((g:!((h:codeEditor,i:(fontScale:14,j:1,lang:c%2B%2B,selection:(endColumn:1,endLineNumber:35,positionColumn:1,positionLineNumber:35,selectionStartColumn:1,selectionStartLineNumber:35,startColumn:1,startLineNumber:35),source:'%23include+%3Cmemory%3E%0A%23include+%3Cutility%3E%0A%0Astd::unique_ptr%3Cint%3E+make_unique_ptr_int()+noexcept+%7B%0A++++auto+v+%3D+std::unique_ptr%3Cint%3E(new+int)%3B%0A++++return+std::move(v)%3B%0A%7D%0A%0Astd::unique_ptr%3Cint%3E+get_unique_ptr()%3B%0Aint+*get_raw_ptr()%3B%0A%0Avoid+foo()+%7B%0A++++auto+ptr+%3D+get_unique_ptr()%3B%0A%7D%0A%0Avoid+bar()+%7B%0A++++auto+ptr+%3D+get_raw_ptr()%3B%0A++++if(ptr)%0A++++++++delete+ptr%3B%0A%7D%0A%0Aint+foo2()+%7B%0A++++auto+ptr+%3D+get_unique_ptr()%3B%0A++++return+*ptr%3B++++%0A%7D%0A%0Aint+bar2()+%7B%0A++++auto+ptr+%3D+get_raw_ptr()%3B%0A++++int+v+%3D+*ptr%3B%0A++++delete+ptr%3B%0A++++return+v%3B%0A%7D%0A+%0A%0A'),l:'5',n:'0',o:'C%2B%2B+source+%231',t:'0')),k:45.248041775456926,l:'4',n:'0',o:'',s:0,t:'0'),(g:!((h:compiler,i:(compiler:g82,filters:(b:'0',binary:'1',commentOnly:'0',demangle:'0',directives:'0',execute:'1',intel:'0',libraryCode:'1',trim:'0'),fontScale:14,j:1,lang:c%2B%2B,libs:!((name:xtl,ver:'053'),(name:xtensor,ver:'0194'),(name:fmt,ver:trunk)),options:'-O2',selection:(endColumn:15,endLineNumber:52,positionColumn:15,positionLineNumber:52,selectionStartColumn:12,selectionStartLineNumber:52,startColumn:12,startLineNumber:52),source:1),l:'5',n:'0',o:'x86-64+gcc+8.2+(Editor+%231,+Compiler+%231)+C%2B%2B',t:'0')),header:(),k:54.75195822454309,l:'4',m:100,n:'0',o:'',s:0,t:'0')),l:'2',n:'0',o:'',t:'0')),version:4"></iframe>  
  
  <h2> Unique_ptr case 3: passing a unique_ptr is unpleasant </h2>
  
  Passing raw pointer is by register. Passing unique_ptr is by stack.
  
  The caller doesn't know if the callee take the owner ship of unqiue_ptr, so the caller must check that.
  
  g++ has some defect (I am not sure) in optimization of unqiue_ptr for `foo2`.
  
  <iframe width="1600px" height="700px" loading="lazy"  src="https://godbolt.org/e?readOnly=true&hideEditorToolbars=true#z:OYLghAFBqd5QCxAYwPYBMCmBRdBLAF1QCcAaPECAM1QDsCBlZAQwBtMQBGAFlICsupVs1qhkAUgBMAISnTSAZ0ztkBPHUqZa6AMKpWAVwC2tQVvQAZPLUwA5YwCNMxEAGZOpAA6oFhdbT1DE0FvXzU6Kxt7IycXd0VlTFV/BgJmYgJA41MPJRVw2lT0gki7R2c3XLSMrOCq4tLo2MqASkVUA2JkDgByKVdrZEMsAGpxVx0jTCMSAE9x7HEABgBBfsHhzDGJgzVWQnnXRdXltdWFAnQQEANaPABHA0wAfU8CYnGdawIFkeRiTDMAgvW4PJ6vd4QFojWioTAAD26b3GslW3xGACp/oDgc9iMwAO4Q4hQmFwxGYZGuVErABuqDw6D%2BdAUxhBd0eLzeJIuVxuHPB3M%2B31%2B0NhCKRP2pp3pjOZtFZUzxhOJEHRGIxYvJkpRpxlDKZNFQpPEAHYaSNLSNeddQZzicL6L9aRAbASRt8WrrVlb5Yr2WCuZCbSAZrTMBBaS0vdKTqaACJ61aypkOdIm82nX3q7nbeMwzDukWxla%2BtAKtnKonciBSABs3JjFqteCoEEbWd9Vqw7GBIyFJbNiZOI7pBpGRskGeblpDdsF70dUuwI1peb%2BAKBAftNabnct5f9z3nQZ5l2uYYjUb3ceHZzHcsnz2n%2B79lZPquxW%2BPAtPUJvawJkmD6pukU7QmaM4evQmJruM%2BZfri%2BLVpCAFliylbIaq9ZRt6pYtm2uE%2Bl2lo9pgfa0nhQ6nD0bSsCAPQAKw9KQpg9EsLGoAxOhyHI1odF0Wz9JwLEEAxHHRqQADWIDcAAHAAdKapqSHJ3CMQAnIxrhLEskh1pIQgMdwLFsRxpBcT0LEKCASykGJ7G0aQcCwEgaBGJ4eDsGQFAQO5nneSAwAaYZVBecCxA2RADjiSxDjWOkswMSJpDuVM9AAPK0KwSWOaQWBGCIwDsLF%2BV4ACyThjZeUIkkuy9Cl3zKKV%2BwOPixCzHoWCle8eBGLFbQ0PQTBsBwPD8IIwiiCgvEyEIeAODZsC0MwUwgPCBCsKQ4YuOx2lOa6q0cBtWgKCQ20VOxnAaSZbSHWtVBGAQF0uO8txSZJqBvP41UALQZa41mJMkGgQOYtQ5HWpDmI05QuHWHihH4dAQ1wUNIwUsMxBUCMJPkKTVJk%2BjZFwrh40kBRFBkWPNLjFzFKjnBk/T1PWGU2Pw5wbRnZ03RcHRDHMaxpWWfCcl1r9dbcCMwDIMgIwaQpkgjBAuCECQYySPEIx6B5XnOJr7jQjxMhyKJA1tAggJYC4ULSSAjGcErkimpwjHcEs3B1hpGmmq4GlGT0JmkP1nC6cLeWWdZtn2RbgeSKZIsMebjmSTtvgaNwQA%3D%3D%3D"></iframe>

  <h2> std::error_code </h2>
  
  For GCC: 
  
  Returning error_code is by register!
  
  Checking if there is an error is fast!
  
  However, `checking which **error_condition** the error is` is slow. 
  
  One non-inline function to get the system_category and one or two virtual function call to check if `lhs.category().equivalent(rhs)` or `rhs.category().equivalent(lhs)`
    
  
   <iframe width="1600px" height="700px" loading="lazy"  src="https://godbolt.org/e?readOnly=true&hideEditorToolbars=true#g:!((g:!((g:!((h:codeEditor,i:(fontScale:14,j:1,lang:c%2B%2B,selection:(endColumn:1,endLineNumber:24,positionColumn:1,positionLineNumber:1,selectionStartColumn:1,selectionStartLineNumber:24,startColumn:1,startLineNumber:1),source:'%23include+%3Ccstdio%3E%0A%23include+%3Csystem_error%3E%0A%23include+%3Ctype_traits%3E%0A%0Astd::error_code+get_error_code()+noexcept%3B%0A%0A//static_assert(std::is_trivial%3Cstd::error_code%3E::value)%0Astatic_assert(std::is_trivially_destructible%3Cstd::error_code%3E::value)%3B%0A%0Avoid+foo()+%7B%0A%0A++++auto+ec+%3D+get_error_code()%3B%0A++++if(!!ec)+%5B%5Blikely%5D%5D+%7B%0A++++++++return%3B%0A++++%7D+else+if(ec+%3D%3D+std::errc::file_exists)+%7B%0A++++++++printf(%221%22)%3B%0A++++%7D+else+%7B%0A++++++++printf(%222%22)%3B%0A++++%7D%0A%0A%7D%0A%0A%0A'),l:'5',n:'0',o:'C%2B%2B+source+%231',t:'0')),k:50,l:'4',n:'0',o:'',s:0,t:'0'),(g:!((h:compiler,i:(compiler:gsnapshot,filters:(b:'0',binary:'1',commentOnly:'0',demangle:'0',directives:'0',execute:'1',intel:'0',libraryCode:'0',trim:'1'),fontScale:14,j:1,lang:c%2B%2B,libs:!(),options:'+-O2+-std%3Dc%2B%2B2a',selection:(endColumn:20,endLineNumber:42,positionColumn:20,positionLineNumber:42,selectionStartColumn:1,selectionStartLineNumber:40,startColumn:1,startLineNumber:40),source:1),l:'5',n:'0',o:'x86-64+gcc+(trunk)+(Editor+%231,+Compiler+%231)+C%2B%2B',t:'0')),k:50,l:'4',n:'0',o:'',s:0,t:'0')),l:'2',n:'0',o:'',t:'0')),version:4"></iframe>  
  
  
  <h2> forward_list </h2>
  <iframe width="1600px" height="600px" loading="lazy"  src="https://godbolt.org/e?readOnly=true&hideEditorToolbars=true#g:!((g:!((g:!((h:codeEditor,i:(fontScale:14,j:1,lang:c%2B%2B,selection:(endColumn:1,endLineNumber:5,positionColumn:1,positionLineNumber:5,selectionStartColumn:1,selectionStartLineNumber:5,startColumn:1,startLineNumber:5),source:'%23include+%3Ccstdio%3E%0A%23include+%3Csystem_error%3E%0A%23include+%3Ctype_traits%3E%0A%23include+%3Cforward_list%3E%0A%0Aint+foo(std::forward_list%3Cint%3E+%26a)+%7B%0A++++int+sum+%3D+0%3B%0A++++for(auto+it+%3D+a.before_begin()%3B%0A++++++++++++std::next(it)+!!%3D+a.end()%3B+%2B%2Bit)+%7B%0A++++++++auto+v+%3D+*next(it)%3B%0A++++++++sum+%2B%3D+v%3B%0A++++%7D%0A++++return+sum%3B%0A%7D%0A%0A//+slitly+better+than+foo%0Aint+bar(std::forward_list%3Cint%3E+%26a)+%7B%0A++++int+sum+%3D+0%3B%0A++++for(auto+it+%3D+a.begin()%3B%0A++++++++++++it+!!%3D+a.end()%3B+%2B%2Bit)+%7B%0A++++++++auto+v+%3D+*it%3B%0A++++++++sum+%2B%3D+v%3B%0A++++%7D%0A++++return+sum%3B%0A%7D%0A%0A'),l:'5',n:'0',o:'C%2B%2B+source+%231',t:'0')),k:50.03996802557954,l:'4',n:'0',o:'',s:0,t:'0'),(g:!((h:compiler,i:(compiler:g92,filters:(b:'0',binary:'1',commentOnly:'0',demangle:'0',directives:'0',execute:'1',intel:'0',libraryCode:'1',trim:'1'),fontScale:14,j:1,lang:c%2B%2B,libs:!(),options:'-O2+-std%3Dc%2B%2B2a',selection:(endColumn:1,endLineNumber:1,positionColumn:1,positionLineNumber:1,selectionStartColumn:1,selectionStartLineNumber:1,startColumn:1,startLineNumber:1),source:1),l:'5',n:'0',o:'x86-64+gcc+9.2+(Editor+%231,+Compiler+%231)+C%2B%2B',t:'0')),k:49.96003197442046,l:'4',n:'0',o:'',s:0,t:'0')),l:'2',n:'0',o:'',t:'0')),version:4"></iframe>

  <h2> vector::push_back vs. vector::reserve </h2>
  <iframe width="1600px" height="600px" loading="lazy"  src="https://godbolt.org/e?readOnly=true&hideEditorToolbars=true#g:!((g:!((g:!((h:codeEditor,i:(fontScale:14,j:1,lang:c%2B%2B,selection:(endColumn:1,endLineNumber:26,positionColumn:1,positionLineNumber:1,selectionStartColumn:1,selectionStartLineNumber:26,startColumn:1,startLineNumber:1),source:'%23include+%3Ccstdio%3E%0A%23include+%3Csystem_error%3E%0A%23include+%3Ctype_traits%3E%0A%23include+%3Cforward_list%3E%0A%23include+%3Cvector%3E%0A%0Avoid+func()%3B%0A%0Astd::vector%3Cint%3E+foo(int+n)+%7B%0A++++std::vector%3Cint%3E+v%3B%0A++++for(int+i+%3D+0%3Bi+%3C+n%3B+%2B%2Bi)+%7B%0A++++++++v.push_back(i)%3B%0A++++%7D%0A++++return+v%3B%0A%7D%0A%0Astd::vector%3Cint%3E+bar(int+n)+%7B%0A++++std::vector%3Cint%3E+v%3B%0A++++v.reserve(n)%3B%0A++++for(int+i+%3D+0%3Bi+%3C+n%3B+%2B%2Bi)+%7B%0A++++++++v%5Bi%5D+%3D+i%3B%0A++++%7D%0A++++return+v%3B%0A%7D%0A%0A'),l:'5',n:'0',o:'C%2B%2B+source+%231',t:'0')),k:50.03996802557954,l:'4',n:'0',o:'',s:0,t:'0'),(g:!((h:compiler,i:(compiler:g92,filters:(b:'0',binary:'1',commentOnly:'0',demangle:'0',directives:'0',execute:'1',intel:'0',libraryCode:'0',trim:'1'),fontScale:14,j:1,lang:c%2B%2B,libs:!(),options:'-O2+-std%3Dc%2B%2B2a',selection:(endColumn:20,endLineNumber:54,positionColumn:1,positionLineNumber:50,selectionStartColumn:20,selectionStartLineNumber:54,startColumn:1,startLineNumber:50),source:1),l:'5',n:'0',o:'x86-64+gcc+9.2+(Editor+%231,+Compiler+%231)+C%2B%2B',t:'0')),k:49.96003197442046,l:'4',n:'0',o:'',s:0,t:'0')),l:'2',n:'0',o:'',t:'0')),version:4"></iframe>

  <h2> GCC optimizes std::invoke well, MSVC sucks... </h2>
  <iframe width="1600px" height="600px" loading="lazy"  src="https://godbolt.org/e?readOnly=true&hideEditorToolbars=true#g:!((g:!((g:!((h:codeEditor,i:(fontScale:14,j:1,lang:c%2B%2B,selection:(endColumn:2,endLineNumber:5,positionColumn:2,positionLineNumber:5,selectionStartColumn:2,selectionStartLineNumber:5,startColumn:2,startLineNumber:5),source:'%23include+%3Cfunctional%3E%0A%0Aint+foo(int+a)+%7B%0A++++return+a+%2B+1%3B%0A%7D%0A%0Aint+test_free_function(int(*f)(int))+%7B%0A++++return+std::invoke(f,+1)%3B%0A%7D%0A%0Aint+test_free_function2()+%7B%0A++++return+std::invoke(%26foo,+1)%3B%0A%7D%0A%0Astruct+S+%7B%0A++++int+member_function(int+a)+%7B+return+a%2B1%3B+%7D%0A%7D%3B%0A%0Aint+test_member_function(S*s,+int+(S::*mem)(int))+%7B%0A++++return+std::invoke(mem,+s,+1)%3B%0A%7D%0A%0Aint+test_member_function2(S+*s)+%7B%0A++++return+std::invoke(%26S::member_function,+s,+1)%3B%0A%7D%0A'),l:'5',n:'0',o:'C%2B%2B+source+%231',t:'0')),k:50.03996802557954,l:'4',n:'0',o:'',s:0,t:'0'),(g:!((h:compiler,i:(compiler:g92,filters:(b:'0',binary:'1',commentOnly:'0',demangle:'0',directives:'0',execute:'1',intel:'0',libraryCode:'0',trim:'1'),fontScale:14,j:1,lang:c%2B%2B,libs:!(),options:'-O2+-std%3Dc%2B%2B1z',selection:(endColumn:34,endLineNumber:4,positionColumn:34,positionLineNumber:4,selectionStartColumn:34,selectionStartLineNumber:4,startColumn:34,startLineNumber:4),source:1),l:'5',n:'0',o:'x86-64+gcc+9.2+(Editor+%231,+Compiler+%231)+C%2B%2B',t:'0')),k:49.96003197442046,l:'4',n:'0',o:'',s:0,t:'0')),l:'2',n:'0',o:'',t:'0')),version:4"></iframe>
  
  </center>
</body>
  
</html>
